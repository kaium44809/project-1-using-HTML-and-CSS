(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[30],{1341:function(t,i,e){var s=e(1626);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,e(9).default)("7aeb5251",s,!0,{sourceMap:!1})},1342:function(t,i,e){var s=e(1628);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,e(9).default)("f2ae22c6",s,!0,{sourceMap:!1})},1625:function(t,i,e){"use strict";e(1341)},1626:function(t,i,e){var s=e(8)((function(t){return t[1]}));s.push([t.i,".illustration-modal{max-width:1144px;width:100%}.illustration-modal>.modal-close{right:-60px;top:16px}@media(max-width:1300px){.illustration-modal>.modal-close{left:10px;top:10px!important}}@media(max-width:400px){.illustration-modal>.modal-close{height:32px;width:32px}}",""]),s.locals={},t.exports=s},1627:function(t,i,e){"use strict";e(1342)},1628:function(t,i,e){var s=e(8)((function(t){return t[1]}));s.push([t.i,".body[data-v-98368ada]{background-color:#fff;max-height:100%;position:relative;width:100%}@media(max-width:550px){.body[data-v-98368ada]{order:2;width:100%}}@media(min-width:1144px){.i8-scroll[data-v-98368ada]>.full-illustration{box-shadow:0 0 1px #6060604f,0 12px 24px -6px #60606026;position:relative}}.i8-scroll[data-v-98368ada]::-webkit-scrollbar{display:none}",""]),s.locals={},t.exports=s},1837:function(t,i,e){"use strict";e.r(i);var s=e(13),l=e(215),o=e(1211),a={name:"OuchIllustrationModal",components:{OuchFullIllustration:e(1421)["a"]},data(){return{bodyEl:null,gettingRelatedCategories:!1,gettingSameStyleIllustrations:!1,hasFullInfo:!1,hasPrev:!1,hasNext:!1,illustration:null,illustrationsHistory:[],initialPath:null,initialTitle:"",isAnimated:!1,loading:!0,locale:this.$i18n.localeProperties.iso,relatedCategories:[],sameStyleIllustrations:[],scrollTop:0,thumbImage:null,totalSameStyle:0,totalRelatedCategories:0,windowHeight:0}},computed:{...Object(s["e"])({modalActive:t=>t.modalActive,illustrationIndexOffset:t=>t.illustrationIndexOffset,userId:t=>{var i;return(null===(i=t.auth.user)||void 0===i?void 0:i.id)||""},windowWidth:t=>t.windowWidth})},watch:{illustration(t){t?this.$nextTick((()=>{this.$refs.body&&(this.$refs.body.scrollTop=0)})):this.hideToast()}},created(){this.isMobile=Object(l["a"])()},methods:{...Object(s["b"])(["setModalActive","setIllustrationIndexOffset","setIllustrationNavDirection"]),hideToast(){const t=document.getElementsByClassName("toast-container");t.length&&(t[0].outerHTML="")},setKeyEvents(){window.addEventListener("keydown",this.keyHandler)},removeKeyEvents(){window.removeEventListener("keydown",this.keyHandler)},keyHandler(t){"ArrowLeft"===t.code&&this.hasPrev&&(this.setIllustrationNavDirection(-1),this.setIllustrationIndexOffset(this.illustrationIndexOffset-1)),"ArrowRight"===t.code&&this.hasNext&&(this.setIllustrationNavDirection(1),this.setIllustrationIndexOffset(this.illustrationIndexOffset+1))},scrollHandler(){this.scrollTop=this.$refs.body.scrollTop},async modalShown(t){var i,e,s;if(this.thumbImage=null==t?void 0:t.thumb,this.setKeyEvents(),this.addScrollToIllustrationBody(),this.freezePageBody(),this.setAppHeight(!0),this.loading=!0,this.modalActive||(this.setModalActive(!0),this.initialPath=this.$route.fullPath,this.initialTitle=document.title),this.sameStyleIllustrations=[],this.relatedCategories=[],this.hasFullInfo=!1,!t.illustration)return;this.illustration=t.illustration;try{this.illustration=await Object(o["b"])({app:this,store:this.$store,locale:this.locale,id:this.illustration.id})}catch(t){console.error(t)}finally{this.hasFullInfo=!0}const{hasPrev:l,hasNext:a}=t;this.hasPrev=l,this.hasNext=a,this.updateHistoryState(t),document.title=`${t.illustration.heading} | Ouch`,null!==(i=this.illustration)&&void 0!==i&&null!==(e=i.styles)&&void 0!==e&&e.length&&null!==(s=this.illustration)&&void 0!==s&&s.id&&(this.getSimilars(),this.getRelatedCategories()),this.loading=!1},addScrollToIllustrationBody(){this.$nextTick((()=>{this.scrollTop=0,this.$refs.body&&(this.bodyEl=this.$refs.body,this.bodyEl.addEventListener("scroll",this.scrollHandler))}))},freezePageBody(){document.body.classList.add("is-frozen"),this.isMobile||document.body.classList.add("is-frozen--desktop")},async getSimilars(){this.gettingSameStyleIllustrations=!0;const{illustrations:t,total:i}=await Object(o["e"])({app:this,illustrationId:this.illustration.id,store:this.$store,locale:this.locale,stylePrettyId:this.illustration.styles[0].pretty_id});this.sameStyleIllustrations=t,this.totalSameStyle=i,this.gettingSameStyleIllustrations=!1},async getRelatedCategories(){this.gettingRelatedCategories=!0;const{categories:t,total:i}=await Object(o["c"])({app:this,store:this.$store,illustrationId:this.illustration.id});this.totalRelatedCategories=i,this.relatedCategories=t,this.gettingRelatedCategories=!1},unFreezePageBody(){document.body.classList.remove("is-frozen"),document.body.classList.remove("is-frozen--desktop")},updateHistoryState(t){var i;let{popstate:e=!1,illustration:s}=t;if(null==s||!s.pretty_id)return;e||this.illustrationsHistory.push(s);const l=`/illustrations/illustration/${s.pretty_id}${null!=s&&null!==(i=s.json)&&void 0!==i&&i.url&&this.isAnimated?"--animated":""}`;window.history.pushState({page:l,title:s.id,id:s.id},s.heading,l)},onPopStateChange(t){if(!this.modalActive)return!0;this.$nextTick((()=>{var t,i,e;if(1===this.illustrationsHistory.length)return this.$ouchModal.hide("illustration");this.illustrationsHistory.pop();const s=this.illustrationsHistory[this.illustrationsHistory.length-1];this.$ouchModal.show("illustration",{popstate:!0,illustration:s,thumb:{maxWidth:null==s||null===(t=s.preview1x)||void 0===t?void 0:t.width,maxHeight:null==s||null===(i=s.preview1x)||void 0===i?void 0:i.height,url:null==s||null===(e=s.thumb1x)||void 0===e?void 0:e.url}})}))},modalHidden(){this.modalActive&&(this.unFreezePageBody(),this.setAppHeight(!1),this.removeKeyEvents(),this.setModalActive(!1),this.illustrationsHistory=[],this.sameStyleIllustrations=[],this.relatedCategories=[],this.illustration=null,this.hasPrev=!1,this.hasNext=!1,this.thumbImage=null,window.history.replaceState(null,null,this.initialPath),document.title=this.initialTitle,this.bodyEl&&(this.bodyEl.removeEventListener("scroll",this.scrollHandler),this.bodyEl=null))},setAppHeight(t){if(t&&this.windowHeight===window.innerHeight)return;this.windowHeight=window.innerHeight;const i=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${i}px`);const e=document.querySelector("html"),s=document.querySelector("body");e.style.height=t?"calc(var(--vh, 1vh) * 100)":"auto",s.style.height=t?"calc(var(--vh, 1vh) * 100)":"auto"}},mounted(){window.addEventListener("popstate",this.onPopStateChange)},beforeDestroy(){window.removeEventListener("popstate",this.onPopStateChange)}},n=(e(1625),e(1627),e(5)),r=Object(n["a"])(a,(function(){var t=this,i=t._self._c;return i("ouch-modal",{attrs:{"affect-scroll":"",name:"illustration",contentClass:"illustration-modal",scrollTop:t.scrollTop},on:{shown:t.modalShown,closed:t.modalHidden},scopedSlots:t._u([{key:"body",fn:function(){return[i("div",{ref:"body",staticClass:"i8-scroll"},[i("ouch-full-illustration",{attrs:{"content-loading":t.gettingSameStyleIllustrations||t.gettingRelatedCategories,"has-full-info":t.hasFullInfo,loading:t.loading,hasNext:t.hasNext,hasPrev:t.hasPrev,illustration:t.illustration,"related-styles":t.relatedCategories,"same-style-illustrations":t.sameStyleIllustrations,"thumb-image":t.thumbImage,"total-same-style":t.totalSameStyle,"total-related-styles":t.totalRelatedCategories},on:{"animation:change":function(i){t.isAnimated=i}}})],1)]},proxy:!0}])})}),[],!1,null,"98368ada",null);i["default"]=r.exports}}]);