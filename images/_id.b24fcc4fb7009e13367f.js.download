(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[51],{1146:function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"c",(function(){return r})),i.d(e,"b",(function(){return s}));var a=i(45);async function o(t){let{app:e,store:i,locale:a}=t;try{const{categories:t}=await e.$categoriesRepository.index({locale:a});return t}catch(t){return console.warn("cannot get categories"),[]}}async function r(t){var e,i;let{app:a,store:o}=t;const r={page:1,per_page:21,random_previews_count:1,locale:null===(e=a.i18n||a.$i18n)||void 0===e||null===(i=e.localeProperties)||void 0===i?void 0:i.iso};let s=[];try{var l;const t=await o.dispatch("cache/get",{key:{...r,keyType:"categories-previews-trending"}});return t?s=t:(s=await a.$categoriesPreviewsRepository.index(r),o.dispatch("cache/set",{key:{...r,keyType:"categories-previews-trending"},value:s})),((null===(l=s)||void 0===l?void 0:l.categories)||[]).map((t=>({icon:"",prettyId:t.pretty_id,cover:t.random_previews[0],title:t.title})))}catch(t){return console.error(t),[]}}async function s(t){var e;let{app:i,store:o,currentCategoryPath:r,stylePrettyId:s,subjectPrettyId:l,formattedParams:n,locale:c}=t;const u=o.state.categories.all,{categoryParams:d,hasCategory:h}=Object(a["g"])({category:(null==r?void 0:r[0])||(null===(e=Object(a["e"])(l,u))||void 0===e?void 0:e[0]),locale:c,style:s,subjectPrettyId:l});h&&o.dispatch("setCurrentCategory",r);try{const t={...n,...d};l&&(delete t.category_pretty_ids,delete t.parent_id);const e={...t,keyType:"current categories"},a=await o.dispatch("cache/get",{key:e});if(a)return[...a];if(h&&(null==d||!d.parent_id))return[];const{categories:r}=await i.$categoriesRepository.index(t);return o.dispatch("cache/set",{key:e,value:r}),r}catch(t){return console.error("cannot get categories"),[]}}},1168:function(t,e,i){"use strict";var a=i(73),o=i.n(a);e["a"]={data:()=>({windowHeight:0}),methods:{preventBodyScroll(t){document.querySelector("html").style.overflow=t?"hidden":""},setAppHeight(t){if(t&&this.windowHeight===window.innerHeight)return;this.windowHeight=window.innerHeight;const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`);document.querySelector("html").style.height=t?"calc(var(--vh, 1vh) * 100)":"auto"}},mounted(){const t=this,e=o()((function(){t.setAppHeight()}),300);window.addEventListener("resize",e),this.$once("hook:beforeDestroy",(()=>{window.removeEventListener("resize",e)}))},updated(){this.setAppHeight()}}},1832:function(t,e,i){"use strict";i.r(e);var a=i(13),o=i(26),r=i.n(o),s=i(45),l=i(1168),n=i(10),c=i(1146),u=i(1211),d={name:"IllustrationPage",components:{OuchFullIllustration:i(1421)["a"]},mixins:[l["a"]],layout:"content",async asyncData(t){let{params:e,app:i,error:a,route:o,store:l,res:n,redirect:d}=t;const h="secret"in o.query?o.query.secret:"",p=i.i18n.localeProperties.iso;try{var v,y,m,g,w,I,S,f,b,k;if(!l.state.categories.all.length){const t=await Object(c["a"])({app:i,store:l,locale:p});l.dispatch("setCategories",t)}const t=e.id.replace(/--animated$/,"");let o;const n={locale:p};try{const e=await l.dispatch("cache/get",{key:{...n,id:t,keyType:"illustration"}});if(e)o=e;else{const{data:e}=await r.a.request({method:"get",baseURL:"https://api-ouch.icons8.com/api/frontend/v1/",url:`illustrations/${t}`,params:{locale:p}});o=e,l.dispatch("cache/set",{key:{...n,id:t,keyType:"illustration"},value:o})}}catch(t){return a({statusCode:404,message:"Whoops, couldn't find illustration with this id"})}const _=/--animated$/.test(e.id);t!==o.pretty_id&&d(301,`/illustrations/illustration/${o.pretty_id}${_?"--animated":""}`);const O=`OUCH_V2.SEO.ILLUSTRATION_PAGE.TITLE${_?"_ANIMATED":""}`,P=null===(v=o)||void 0===v||null===(y=v.styles)||void 0===y||null===(m=y[0])||void 0===m?void 0:m.title,C=null===(g=o)||void 0===g||null===(w=g.styles)||void 0===w||null===(I=w[0])||void 0===I?void 0:I.pretty_id,E=o.heading||"Illustration",$={heading:E.toLowerCase()};P&&($.styles=P.toLowerCase()),await i.$setOuchSeo({title:i.i18n.t(O,{heading:Object(s["a"])(E)}),description:i.i18n.t("OUCH_V2.SEO.ILLUSTRATION_PAGE.DESCRIPTION",$),image:(null===(S=o)||void 0===S||null===(f=S.og_preview1x)||void 0===f?void 0:f.url)||`${"https://maxst.icons8.com"||!1}/vue-static/ouch/seo/opengraph.png`});const[{value:A},{value:T}]=await Promise.allSettled([Object(u["e"])({app:i,illustrationId:o.id,locale:p,store:l,stylePrettyId:C}),Object(u["c"])({app:i,store:l,locale:p,illustrationId:o.id})]),{illustrations:j,total:L}=A,{categories:R,total:H}=T,W=(null===(b=o)||void 0===b||null===(k=b.preview1x)||void 0===k?void 0:k.url)||"";return l.commit("SET_PRELOAD_IMAGE",W),{illustration:o,relatedCategories:R,sameStyleIllustrations:j,secret:h,showInitAnimated:_,thumbImageSrc:W,totalRelatedCategories:H,totalSameStyleIllustrations:L}}catch(t){console.error(t),l.commit("HREFLANG_DELETE"),a({statusCode:404,message:"Whoops, couldn't find illustration with this id"})}},data(){return{locale:this.$i18n.localeProperties.iso,illustration:{purchased:!1},previewWithoutWatermarks:null,relatedCategories:[],sameStyleIllustrations:[],showInitAnimated:!1,secret:"",thumbImageSrc:"",totalRelatedCategories:0,totalSameStyleIllustrations:0}},computed:{...Object(a["e"])({user:t=>t.auth.user}),...Object(a["c"])(["limits"]),hasSubscription(){var t,e;return(null===(t=this.limits)||void 0===t?void 0:t.isUnlimited)||(null===(e=this.limits)||void 0===e?void 0:e.value)>0},thumbImage(){return{url:this.thumbImageSrc}}},watch:{user:{deep:!0,handler(t,e){var i;!(null!=e&&e.loaded)&&(null==t?void 0:t.loaded)&&Object(n["getCookie"])("i8token")&&null!==(i=this.illustration)&&void 0!==i&&i.id&&this.getPreviewWithoutWatermarks()}}},methods:{async getPreviewWithoutWatermarks(){try{var t;this.illustration=await Object(u["b"])({app:this,store:this.$store,id:null===(t=this.illustration)||void 0===t?void 0:t.id,locale:this.$i18n.localeProperties.iso}),this.previewWithoutWatermarks=this.illustration.preview1x.url}catch(t){console.log("cannot get illustration preview w/o watermarks")}}}},h=i(5),p=Object(h["a"])(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"illustration-page"},[e("ouch-full-illustration",{attrs:{"has-full-info":"","illustration-page":"",illustration:t.illustration,sameStyleIllustrations:t.sameStyleIllustrations,totalSameStyle:t.totalSameStyleIllustrations,"preview-without-watermarks":t.previewWithoutWatermarks,secret:t.secret,relatedStyles:t.relatedCategories,"thumb-image":t.thumbImage,totalRelatedStyles:t.totalRelatedCategories,"show-init-animated":t.showInitAnimated}})],1)}),[],!1,null,null,null);e["default"]=p.exports}}]);